{
    "collab_server" : "",
    "contents" : "###########################################################################\n#Kreisflächenzuwachs Prognaus\n###########################################################################\n#'@title Basal area increment model Prognaus\n#'\n#'@description \\code{BAI.P} calculates the basal area increment in cm²/period\n#'\n#'@details\n#'Calculates the basal area increment of Prognaus. The model is based\n#'on Monserud and Sterba (1996); Coefficients are taken from Hasenauer (2000).\n#'For full references see\n#'\\url{https://homepage.boku.ac.at/sonja/Lit_Prog.pdf}.\n#'Coding of tree species, soil moisture, relief, soil type, vegetation type\n#'and growth district uses the coding of the\n#'Austrian National Forest Inventory\n#'(\\href{https://homepage.boku.ac.at/sonja/ANFI_E.pdf}{ANFI}).\n#'\n#'@param BART Tree species,\n#'coding=\\href{https://homepage.boku.ac.at/sonja/ANFI_E.pdf}{ANFI},\n#'default=1 Norway spruce\n#'@param BHD_cm dbh in cm\n#'@param CR_Ant Crown ratio as ratio\n#'@param BAL Basal area of larger trees (Wykoff, 1990)\n#'@param CCF Crown competition factor (Krajicek, 1961)\n#'@param Seehoehe_m Elevation in m (Range: 200-2200 m)\n#'@param Hangneigung_Proz Slope in percent\n#'@param Exposition_Grad Aspect in degree\n#'@param HF_cm Thickness of F-humus layer in cm\n#'@param HH_cm Thickness of H-humus layer in cm\n#'@param Bodentiefe_cm Soil depth in cm, model uses dummy variable which is 1 for soildepth <=30cm\n#'@param Bodenfeuchte Soil moisture,\n#'coding=\\href{https://homepage.boku.ac.at/sonja/ANFI_E.pdf}{ANFI}, default=3 is \"moist\"\n#'@param Relief Slope position,\n#'coding=\\href{https://homepage.boku.ac.at/sonja/ANFI_E.pdf}{ANFI}, default=2 is \"middle slope\"\n#'@param Bodentyp Soil type,\n#'coding=\\href{https://homepage.boku.ac.at/sonja/ANFI_E.pdf}{ANFI}, default=9 is\n#' \"Heavy-textured Cambisols and Luvisols derived from moraine material,\n#'  non-calcareous loess, or mudstone\"\n#'@param Vegetationstyp Vegetation type,\n#'coding=\\href{https://homepage.boku.ac.at/sonja/ANFI_E.pdf}{ANFI}, default=1 is Shade-tolerant herbs types\n#'@param Wuchsbezirk Growth district,\n#'coding=\\href{https://homepage.boku.ac.at/sonja/ANFI_E.pdf}{ANFI}, default=13 is Central Alps\n#'@param MSE_ja Dummy variable, default=0, if 1 half of the model MSE is\n#'added to correct for logarithmic transformation bias\n#'@param PL Period length in years, default=5 years, 5 years is maximum\n#'recommended time step for the update of BAL and CCF\n#'\n#'@examples\n#'BAI.P(BART=1,BHD_cm=30,CR_Ant = 0.5,BAL=0,CCF=200)\n\nBAI.P<-function(BART=1, BHD_cm, CR_Ant, BAL, CCF,\n                Seehoehe_m=600, Hangneigung_Proz=50, Exposition_Grad=180,\n                HF_cm=3, HH_cm=2, Bodentiefe_cm=50,\n                Bodenfeuchte=3, Relief=2, Bodentyp=9, Vegetationstyp=1,\n                Wuchsbezirk=13, MSE_ja=0, PL=5){\n\nif (BART==1) { #Fichte\n  a0 = 0.07\n  b1 = 1.396876\n  b2 = -0.000165\n  b3 = 0.634179\n  c1 = -0.017369\n  c2 = -0.000497\n  d1 = -0.003824\n  d1a = 0\n  d2 = -0.186184\n  d2a = 0\n  d3 = 0.034217\n  d4 = -0.076437\n  d5 = -0.018425\n  d6 = -0.009333\n  SD = -0.117116\n  sm = 0.122647\n  SR = 0\n  s1 = 0.410682\n  s2 = 0.350527\n  s3 = 0.174713\n  s4 = 0\n  v1 = 0.187571\n  v2 = 0.323107\n  v3 = 0\n  g1 = 0.106262\n  g2 = 0.043582\n  MSE = 0.559\n  X = 6\n  dWuchsbezirk1<-ifelse(Wuchsbezirk %in% c(4, 5, 8, 16, 17), 1, 0)\n  dWuchsbezirk2<-ifelse(Wuchsbezirk %in% c(1, 3, 10, 18, 19), 1, 0)\n  dBodentyp1<-ifelse(Bodentyp %in% c(2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 15, 16, 20, 24, 25), 1, 0)\n  dBodentyp2<-ifelse(Bodentyp %in% c(1, 13, 14, 22, 23), 1, 0)\n  dBodentyp3<-ifelse(Bodentyp %in% c(18, 19, 21, 26), 1, 0)\n  dBodentyp4<-ifelse(Bodentyp %in% c(0), 1, 0)\n  dVegetationstyp1<-ifelse(Vegetationstyp %in% c(1, 4, 12), 1, 0)\n  dVegetationstyp2<-ifelse(Vegetationstyp %in% c(18, 19, 20), 1, 0)\n  dVegetationstyp3<-ifelse(Vegetationstyp %in% c(0), 1, 0)\n  dRelief1<-ifelse(Relief %in% c(0), 1, 0)\n  dBodenfeuchte1<-ifelse(Bodenfeuchte %in% c(2, 3, 4), 1, 0)\n}\n\nif (BART==2) { #Tanne\n  a0 = -0.712624\n  b1 = 1.469029\n  b2 = -0.000117\n  b3 = 0.502449\n  c1 = -0.015949\n  c2 = -0.000564\n  d1 = 0\n  d1a = 0\n  d2 = 0\n  d2a = 0\n  d3 = 0\n  d4 = 0\n  d5 = 0\n  d6 = 0\n  SD = 0\n  sm = 0\n  SR = 0.293053\n  s1 = 0.550273\n  s2 = 0.383876\n  s3 = 0\n  s4 = 0\n  v1 = 0.185379\n  v2 = 0\n  v3 = 0\n  g1 = 0.37513\n  g2 = 0.211501\n  MSE = 0.753\n  X = 0\n  dWuchsbezirk1<-ifelse(Wuchsbezirk %in% c(17, 19), 1, 0)\n  dWuchsbezirk2<-ifelse(Wuchsbezirk %in% c(1, 2, 4, 5, 6, 7, 8, 9, 10, 11, 12, 14, 16, 18, 20, 21), 1, 0)\n  dBodentyp1<-ifelse(Bodentyp %in% c(6, 7, 9, 11, 12), 1, 0)\n  dBodentyp2<-ifelse(Bodentyp %in% c(2, 3, 4, 5, 8, 10, 13, 14, 15, 16, 19, 20, 22, 23, 24, 25, 26), 1, 0)\n  dBodentyp3<-ifelse(Bodentyp %in% c(0), 1, 0)\n  dBodentyp4<-ifelse(Bodentyp %in% c(0), 1, 0)\n  dVegetationstyp1<-ifelse(Vegetationstyp %in% c(4, 6, 8, 18), 1, 0)\n  dVegetationstyp2<-ifelse(Vegetationstyp %in% c(0), 1, 0)\n  dVegetationstyp3<-ifelse(Vegetationstyp %in% c(0), 1, 0)\n  dRelief1<-ifelse(Relief %in% c(3), 1, 0)\n  dBodenfeuchte1<-ifelse(Bodenfeuchte %in% c(0), 1, 0)\n}\n\nif (BART==3) {   #Lärche\n  a0 = 0.696551\n  b1 = 1.246003\n  b2 = -0.000137\n  b3 = 0.433521\n  c1 = -0.015379\n  c2 = -0.000401\n  d1 = 0\n  d1a = -0.042101\n  d2 = 0\n  d2a = 0\n  d3 = 0\n  d4 = 0\n  d5 = 0\n  d6 = 0\n  SD = 0\n  sm = 0\n  SR = 0\n  s1 = 0.497502\n  s2 = 0.181174\n  s3 = 0\n  s4 = 0\n  v1 = 0.537855\n  v2 = 0.342462\n  v3 = 0.214816\n  g1 = 0.199215\n  g2 = 0\n  MSE = 0.573\n  X = 0\n  dWuchsbezirk1<-ifelse(Wuchsbezirk %in% c(12, 13, 14, 15, 17, 18, 19, 20), 1, 0)\n  dWuchsbezirk2<-ifelse(Wuchsbezirk %in% c(0), 1, 0)\n  dBodentyp1<-ifelse(Bodentyp %in% c(6, 8, 10, 12, 13), 1, 0)\n  dBodentyp2<-ifelse(Bodentyp %in% c(2, 3, 4, 9), 1, 0)\n  dBodentyp3<-ifelse(Bodentyp %in% c(0), 1, 0)\n  dBodentyp4<-ifelse(Bodentyp %in% c(0), 1, 0)\n  dVegetationstyp1<-ifelse(Vegetationstyp %in% c(18, 19), 1, 0)\n  dVegetationstyp2<-ifelse(Vegetationstyp %in% c(1, 4, 7, 13), 1, 0)\n  dVegetationstyp3<-ifelse(Vegetationstyp %in% c(2, 6, 8, 10, 11), 1, 0)\n  dRelief1<-ifelse(Relief %in% c(0), 1, 0)\n  dBodenfeuchte1<-ifelse(Bodenfeuchte %in% c(0), 1, 0)\n}\n\nif (BART==4) {#Kiefer\n  a0 = 0.658017\n  b1 = 1.287496\n  b2 = -0.00024\n  b3 = 0.722032\n  c1 = -0.011146\n  c2 = 0\n  d1 = -0.00405\n  d1a = 0\n  d2 = 0\n  d2a = -0.225295\n  d3 = 0\n  d4 = 0\n  d5 = 0\n  d6 = -0.041745\n  SD = 0\n  sm = 0.269704\n  SR = 0\n  s1 = -0.402267\n  s2 = -0.347126\n  s3 = -0.170259\n  s4 = 0.394765\n  v1 = 0.130182\n  v2 = 0\n  v3 = 0\n  g1 = 0\n  g2 = 0.10559\n  MSE = 0.595\n  X = 6\n  dWuchsbezirk1<-ifelse(Wuchsbezirk %in% c(0), 1, 0)\n  dWuchsbezirk2<-ifelse(Wuchsbezirk %in% c(6, 7, 8, 13, 15, 16, 17, 20, 21), 1, 0)\n  dBodentyp1<-ifelse(Bodentyp %in% c(11, 17), 1, 0)\n  dBodentyp2<-ifelse(Bodentyp %in% c(18), 1, 0)\n  dBodentyp3<-ifelse(Bodentyp %in% c(6, 19), 1, 0)\n  dBodentyp4<-ifelse(Bodentyp %in% c(1, 5, 7, 14, 16, 20, 22), 1, 0)\n  dVegetationstyp1<-ifelse(Vegetationstyp %in% c(3, 4, 8, 12, 19), 1, 0)\n  dVegetationstyp2<-ifelse(Vegetationstyp %in% c(0), 1, 0)\n  dVegetationstyp3<-ifelse(Vegetationstyp %in% c(0), 1, 0)\n  dRelief1<-ifelse(Relief %in% c(0), 1, 0)\n  dBodenfeuchte1<-ifelse(Bodenfeuchte %in% c(1, 2, 3), 1, 0)\n}\n\nif (BART==5) {#Schwarzkiefer\n  a0 = -1.54957\n  b1 = 1.635013\n  b2 = -0.000173\n  b3 = 0\n  c1 = -0.015162\n  c2 = 0\n  d1 = -0.007108\n  d1a = 0\n  d2 = -0.52881\n  d2a = 0\n  d3 = 0\n  d4 = 0\n  d5 = 0\n  d6 = 0\n  SD = 0\n  sm = 0\n  SR = 0.433283\n  s1 = 0\n  s2 = 0\n  s3 = 0\n  s4 = 0\n  v1 = 0\n  v2 = 0\n  v3 = 0\n  g1 = 0\n  g2 = 0\n  MSE = 0.595\n  X = 0\n  dWuchsbezirk1<-ifelse(Wuchsbezirk %in% c(0), 1, 0)\n  dWuchsbezirk2<-ifelse(Wuchsbezirk %in% c(0), 1, 0)\n  dBodentyp1<-ifelse(Bodentyp %in% c(0), 1, 0)\n  dBodentyp2<-ifelse(Bodentyp %in% c(0), 1, 0)\n  dBodentyp3<-ifelse(Bodentyp %in% c(0), 1, 0)\n  dBodentyp4<-ifelse(Bodentyp %in% c(0), 1, 0)\n  dVegetationstyp1<-ifelse(Vegetationstyp %in% c(0), 1, 0)\n  dVegetationstyp2<-ifelse(Vegetationstyp %in% c(0), 1, 0)\n  dVegetationstyp3<-ifelse(Vegetationstyp %in% c(0), 1, 0)\n  dRelief1<-ifelse(Relief %in% c(0), 1, 0)\n  dBodenfeuchte1<-ifelse(Bodenfeuchte %in% c(0), 1, 0)\n}\n\nif (BART==6) {#Zirbe\n  a0 = 2.56557\n  b1 = 0.466866\n  b2 = 0\n  b3 = 0\n  c1 = -0.010259\n  c2 = 0\n  d1 = -0.029576\n  d1a = 0\n  d2 = 0\n  d2a = 0\n  d3 = 0\n  d4 = 0\n  d5 = 0\n  d6 = 0\n  SD = 0\n  sm = 0\n  SR = 0\n  s1 = 0\n  s2 = 0\n  s3 = 0\n  s4 = 0\n  v1 = 0\n  v2 = 0\n  v3 = 0\n  g1 = 0.310889\n  g2 = 0\n  MSE = 0.595\n  X = 18\n  dWuchsbezirk1<-ifelse(Wuchsbezirk %in% c(1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 15, 16, 17, 18, 19, 20, 21), 1, 0)\n  dWuchsbezirk2<-ifelse(Wuchsbezirk %in% c(0), 1, 0)\n  dBodentyp1<-ifelse(Bodentyp %in% c(0), 1, 0)\n  dBodentyp2<-ifelse(Bodentyp %in% c(0), 1, 0)\n  dBodentyp3<-ifelse(Bodentyp %in% c(0), 1, 0)\n  dBodentyp4<-ifelse(Bodentyp %in% c(0), 1, 0)\n  dVegetationstyp1<-ifelse(Vegetationstyp %in% c(0), 1, 0)\n  dVegetationstyp2<-ifelse(Vegetationstyp %in% c(0), 1, 0)\n  dVegetationstyp3<-ifelse(Vegetationstyp %in% c(0), 1, 0)\n  dRelief1<-ifelse(Relief %in% c(0), 1, 0)\n  dBodenfeuchte1<-ifelse(Bodenfeuchte %in% c(0), 1, 0)\n}\n\nif (BART==10) {#Buche\n  a0 = -0.644436\n  b1 = 1.589274\n  b2 = -0.000189\n  b3 = 0.630734\n  c1 = -0.016353\n  c2 = -0.000175\n  d1 = -0.00308\n  d1a = 0\n  d2 = -0.269852\n  d2a = 0\n  d3 = 0\n  d4 = 0\n  d5 = -0.031316\n  d6 = 0.021224\n  SD = -0.215741\n  sm = 0\n  SR = 0\n  s1 = 0.178703\n  s2 = 0\n  s3 = 0\n  s4 = 0\n  v1 = 0.710601\n  v2 = 0.458712\n  v3 = 0\n  g1 = 0.329867\n  g2 = 0.179966\n  MSE = 0.596\n  X = 0\n  dWuchsbezirk1<-ifelse(Wuchsbezirk %in% c(3, 4, 5, 21), 1, 0)\n  dWuchsbezirk2<-ifelse(Wuchsbezirk %in% c(1, 13, 16, 17, 19, 20), 1, 0)\n  dBodentyp1<-ifelse(Bodentyp %in% c(2, 3, 4, 5, 6, 7, 8, 10, 11, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25), 1, 0)\n  dBodentyp2<-ifelse(Bodentyp %in% c(0), 1, 0)\n  dBodentyp3<-ifelse(Bodentyp %in% c(0), 1, 0)\n  dBodentyp4<-ifelse(Bodentyp %in% c(0), 1, 0)\n  dVegetationstyp1<-ifelse(Vegetationstyp %in% c(3, 8, 9, 18, 19), 1, 0)\n  dVegetationstyp2<-ifelse(Vegetationstyp %in% c(1, 2, 4, 5, 6, 12), 1, 0)\n  dVegetationstyp3<-ifelse(Vegetationstyp %in% c(0), 1, 0)\n  dRelief1<-ifelse(Relief %in% c(0), 1, 0)\n  dBodenfeuchte1<-ifelse(Bodenfeuchte %in% c(0), 1, 0)\n}\n\nif (BART==11) {#Eiche\n  a0 = -0.252064\n  b1 = 1.44802\n  b2 = -0.00014\n  b3 = 0\n  c1 = -0.02681\n  c2 = 0\n  d1 = 0\n  d1a = 0\n  d2 = 0\n  d2a = 0\n  d3 = 0.347115\n  d4 = 0.188109\n  d5 = 0\n  d6 = 0\n  SD = 0\n  sm = 0\n  SR = 0\n  s1 = 0.597342\n  s2 = 0.307345\n  s3 = 0.115069\n  s4 = 0\n  v1 = 0.26517\n  v2 = 0\n  v3 = 0\n  g1 = 0\n  g2 = 0\n  MSE = 0.534\n  X = 0\n  dWuchsbezirk1<-ifelse(Wuchsbezirk %in% c(0), 1, 0)\n  dWuchsbezirk2<-ifelse(Wuchsbezirk %in% c(0), 1, 0)\n  dBodentyp1<-ifelse(Bodentyp %in% c(4, 12, 16), 1, 0)\n  dBodentyp2<-ifelse(Bodentyp %in% c(10, 15, 17), 1, 0)\n  dBodentyp3<-ifelse(Bodentyp %in% c(1, 3, 6, 8, 9, 11, 13, 14), 1, 0)\n  dBodentyp4<-ifelse(Bodentyp %in% c(0), 1, 0)\n  dVegetationstyp1<-ifelse(Vegetationstyp %in% c(4, 19, 20), 1, 0)\n  dVegetationstyp2<-ifelse(Vegetationstyp %in% c(0), 1, 0)\n  dVegetationstyp3<-ifelse(Vegetationstyp %in% c(0), 1, 0)\n  dRelief1<-ifelse(Relief %in% c(0), 1, 0)\n  dBodenfeuchte1<-ifelse(Bodenfeuchte %in% c(0), 1, 0)\n}\n\nif (BART==28 | BART==26 | BART==13) {#sonst. Laubholz\n  a0 = 0.936249\n  b1 = 1.133501\n  b2 = 0\n  b3 = 0.517598\n  c1 = -0.01935\n  c2 = 0\n  d1 = 0\n  d1a = 0\n  d2 = -0.460704\n  d2a = 0\n  d3 = 0.145024\n  d4 = -0.040436\n  d5 = 0\n  d6 = 0\n  SD = 0\n  sm = 0\n  SR = 0\n  s1 = 0\n  s2 = 0\n  s3 = 0\n  s4 = 0\n  v1 = 0\n  v2 = 0\n  v3 = 0\n  g1 = 0\n  g2 = 0\n  MSE = 0.757\n  X = 0\n  dWuchsbezirk1<-ifelse(Wuchsbezirk %in% c(0), 1, 0)\n  dWuchsbezirk2<-ifelse(Wuchsbezirk %in% c(0), 1, 0)\n  dBodentyp1<-ifelse(Bodentyp %in% c(0), 1, 0)\n  dBodentyp2<-ifelse(Bodentyp %in% c(0), 1, 0)\n  dBodentyp3<-ifelse(Bodentyp %in% c(0), 1, 0)\n  dBodentyp4<-ifelse(Bodentyp %in% c(0), 1, 0)\n  dVegetationstyp1<-ifelse(Vegetationstyp %in% c(0), 1, 0)\n  dVegetationstyp2<-ifelse(Vegetationstyp %in% c(0), 1, 0)\n  dVegetationstyp3<-ifelse(Vegetationstyp %in% c(0), 1, 0)\n  dRelief1<-ifelse(Relief %in% c(0), 1, 0)\n  dBodenfeuchte1<-ifelse(Bodenfeuchte %in% c(0), 1, 0)\n}\n\nif (BART==13){#Esche\n  a0=1.28677\n}\n\nif (BART==26) {\n  a0 = 1.879919\n}\n\nExposition_rad <- (Exposition_Grad / 180) * pi\nBodentiefe1<-ifelse(Bodentiefe_cm <=30, 1, 0)\n\nBAI = exp(a0 + b1 * log(BHD_cm) + b2 * BHD_cm ^ 2 + b3 * log(CR_Ant) + c1 * BAL+\n            c2 * CCF + d1 * (Seehoehe_m / 100 - X) ^ 2 +\n            d1a * (Seehoehe_m / 100) + d2 * (Hangneigung_Proz / 100) ^ 2+\n            d2a * Hangneigung_Proz / 100 + d3 * (Hangneigung_Proz / 100) * sin(Exposition_rad)+\n            d4 * (Hangneigung_Proz / 100) * cos(Exposition_rad) + d5 * HF_cm + d6 * HH_cm+\n            SD * Bodentiefe1 + sm * dBodenfeuchte1 + SR * dRelief1+\n            s1 * dBodentyp1 + s2 * dBodentyp2+\n            s3 * dBodentyp3 + s4 * dBodentyp4+\n            v1 * dVegetationstyp1 + v2 * dVegetationstyp2+\n            v3 * dVegetationstyp3 + g1 * dWuchsbezirk1+\n            g2 * dWuchsbezirk2 + 0.5 * MSE * MSE_ja)\n\n\n}\n\nBAI.P<-Vectorize(BAI.P)\n\n##########################################################################\n#Durchmesserzuwachs\n##########################################################################\n#'@title Diameter increment model Prognaus\n#'\n#'@description \\code{id.P} calculates the diameter increment in cm/period\n#'\n#'@details\n#'Calculates the diameter increment of Prognaus. The model calls the\n#'basal area increment function of Prognaus and converts it to diameter\n#'increment. For details see description of \\code{\\link{BAI.P}}\n#'\n#'@examples\n#'id.P(BART=1,BHD_cm=30,CR_Ant = 0.5,BAL=0,CCF=200)\n#'\n#'dbh2012<-30\n#'dbh2015<-dbh2012+id.P(BART=1,BHD_cm=30,CR_Ant = 0.5,BAL=0,CCF=200,PL=3)\n\nid.P<-function(BART=1, BHD_cm, CR_Ant, BAL, CCF,\n                Seehoehe_m=600, Hangneigung_Proz=50, Exposition_Grad=180,\n                HF_cm=3, HH_cm=2, Bodentiefe_cm=50,\n                Bodenfeuchte=3, Relief=2, Bodentyp=9, Vegetationstyp=1,\n                Wuchsbezirk=13, MSE_ja=0, PL=5){\n\nBAI<-BAI.P(BART, BHD_cm, CR_Ant, BAL, CCF,\n           Seehoehe_m, Hangneigung_Proz, Exposition_Grad,\n           HF_cm, HH_cm, Bodentiefe_cm,\n           Bodenfeuchte, Relief, Bodentyp, Vegetationstyp,\n           Wuchsbezirk, MSE_ja, PL)\n\nBHD2_cm<-sqrt(BHD_cm^2+BAI*4/pi)\n\nid<-BHD2_cm-BHD_cm #5-jährige id\nid<-PL*id/5\n\n}\n\nid.P<-Vectorize(id.P)\n\n",
    "created" : 1489169868921.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "1800277418",
    "id" : "ADC8AAA7",
    "lastKnownWriteTime" : 1488877629,
    "last_content_update" : 1488877629,
    "path" : "C:/Eigene_Dateien/AaLehre/BWS_StatGrow/Prognaus_R/PrognausBaseSV/R/BAI.R",
    "project_path" : "R/BAI.R",
    "properties" : {
    },
    "relative_order" : 6,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}